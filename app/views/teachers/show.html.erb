<div class="container">
  <div class="row justify-content">
    <% if current_user.photo.attached? %>
        <%= cl_image_tag current_user.photo.key, class: "square", data: {toggle: "dropdown"} %>
    <% else %>
        <i class="fas fa-user-circle fa-2x avatar text-secondary" data-toggle="dropdown"></i>
    <% end %>
  </div>
</div>

<%= link_to "Book Now", new_teacher_booking_path(@teacher.id), class: "btn btn-outline-info" %>

<div class="container">
  <div class="col justify-content" mt-3>
    <h2><%= "#{@teacher.user.first_name} #{@teacher.user.last_name}" %></h2>

    <p>PERSONAL</p>
    <p><b>E-mail:</b> <%= @teacher.user.email.downcase %></p>
    <p><b>Gender:</b> <%= @teacher.user.gender %></p>
    <p><b>Location:</b> <%= @teacher.user.address %></p>

    <%= link_to "Edit", edit_user_registration_path, class: "btn btn-outline-info" %>

    <p>TEACHING</p>
    <p><b>Specialities:</b></p>
    
    <p><% @teacher.speciality.each do |speciality|%>
      <li><%= speciality %></li>
    <% end %></p>

    <p><b>Description:</b> <%= @teacher.description %></p>
    <p><b>Limit of students per class:</b> <%= @teacher.max_students %></p>
    <p><b>Fixed price:</b> USD <%= @teacher.price %>,00</p>
    <p><b>Fee per student in class:</b> USD <%= @teacher.fee %>,00</p>

    <%= link_to "Edit", edit_teacher_path, class: "btn btn-outline-info" %>

    <p><b>Availabilities:</b></p>
  
    <div class="card">
      <% @availabilities_by_date.each do |key, value| %>
        <h3><%= key %></h3>
        <% value.each do |i| %>
          <%= "#{i.start_time} - #{i.end_time}" %> <%= link_to "Delete", teacher_availability_path(i), method: :delete %>
        <% end %> 
      <% end %>
    </div>

    <%= link_to "Add new availability", new_teacher_teacher_availability_path(@teacher.id), class: "btn btn-outline-info" %>
 </div>
</div>
